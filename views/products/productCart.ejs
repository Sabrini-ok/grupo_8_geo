<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/head') %>    
</head>
<body>
    <%- include('../partials/header') %>

    <h1>Carrito de Compras</h1>
    <main class="mainCarrito">

        <section class="productosCarrito">
            <% let total = 0; %>
            <% if (products && products.length > 0) { %>
                <% products.slice(0, 4).forEach((producto, i) => { %>
                    <section class="productoSelect">
                        <div class="img-container">
                            <img src="<%= products.fileName %>">
                        </div>
                        <div class="precioCart">
                            <h1><%= products.productName %></h1>
                            <h2>Precio: $<%= products.price %></h2>
                            <% total += products.price; %>
                            <p>Cantidad: <%= i + 1 %></p>
                        </div>
                        <div class="product-buttons">
                            <div class="primary">
                                <button>Comprar</button>
                            </div>
                            <div class="secondary">
                                <button>Eliminar</button>
                            </div>
                        </div>
                    </section>
                <% }); %>
            <% } else { %>
                <p>No hay productos en el carrito.</p>
            <% } %>
        </section>

        <section class="carritoSummary">
            <h2>Resumen de tu compra</h2>
            <div class="subtotal">
                <p>Subtotal:</p>
                <p>$<%= total.toFixed(2) %></p>
            </div>
            <div class="total">
                <p>Total:</p>
                <p>$<%= total.toFixed(2) %></p>
            </div>
            <div class="checkout-button">
                <button>Ir al Pago</button>
            </div>
        </section>
    </main>
    <%- include('../partials/footer') %>
</body>
</html>
